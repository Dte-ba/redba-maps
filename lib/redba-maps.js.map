{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 8d61039fd925e215bbe6?57cf","webpack:///./src/index.js","webpack:///external \"google\"?1c19","webpack:///./src/utils.js","webpack:///./src/region-polygon.js","webpack:///./src/async-polygon.js"],"names":["maps","MapTypeId","Map","RedbaMap","ele","ops","_regions","regions","regionsDataField","fetchRegion","fetchDistrict","sedeIcon","Error","baOps","center","lat","lng","zoom","mapTypeId","ROADMAP","gmops","Object","assign","setData","showSede","data","Array","hasOwnProperty","forEach","rops","map","region","d","color","centralPosition","centralName","distritos","fetch","baRegions","push","event","obj","trigger","isPromise","then","_createRegions","items","catch","console","log","err","Marker","RegionPolygon","polyOps","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","_setMap","_fetchData","_onClick","emit","sede","position","title","icon","addListener","setMap","hideSede","setVisible","paths","setPaths","Polygon","LatLngBounds","AsyncPolygon","bounds","getPath","e","extend","getMap","fitBounds","getBounds","fn","apply"],"mappings":"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","file":"lib/redba-maps.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"google\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"RedbaMap\", [\"google\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RedbaMap\"] = factory(require(\"google\"));\n\telse\n\t\troot[\"RedbaMap\"] = factory(root[\"google\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8d61039fd925e215bbe6","/**\n *\n * RedbaMap\n *\n * Copyright (c) 2016 Dte-ba\n *\n * MIT License\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n'use strict';\n\nimport google from 'google';\nimport utils from './utils';\nimport RegionPolygon from './region-polygon';\n\nconst {MapTypeId, Map} = google.maps; \n\nexport default class RedbaMap extends Map {\n  constructor(ele, ops) {\n    let _regions = ops.regions;\n    let regionsDataField = ops.regionsDataField;\n    let fetchRegion = ops.fetchRegion;\n    let fetchDistrict = ops.fetchDistrict;\n    let sedeIcon = ops.sedeIcon;\n\n    if (!fetchRegion){\n      throw new Error('The ops.fetchRegion is required, define ops.fetchRegion(idRegion)');\n    }\n\n    if (!fetchDistrict){\n      throw new Error('The ops.fetchDistrict is required, define ops.fetchDistrict(idDistrict)');\n    }\n\n    let baOps = {\n      center: {\n        lat: -36.99483714719853,\n        lng: -59.69601111984252\n      },\n      zoom: 7,\n      mapTypeId: MapTypeId.ROADMAP\n    };\n    \n    let gmops = Object.assign({}, ops, baOps);\n    \n    super(ele, gmops);\n\n    this.setData(_regions);\n    this.regionsDataField = regionsDataField;\n    this.fetchRegion = fetchRegion;\n    this.fetchDistrict = fetchDistrict;\n    this.showSede = ops.showSede || false;\n    this.sedeIcon = ops.sedeIcon;\n  }\n\n  get baRegions(){\n    if (!this._regions){\n      this._regions = [];\n    }\n    return this._regions;\n  }\n\n  _createRegions(data){\n    if (this.regionsDataField){\n      data = data[this.regionsDataField];\n    } else if (!(data instanceof Array)){\n      if (data.hasOwnProperty('data') && (data['data'] instanceof Array)){\n        data = data['data'];\n      } else {\n        throw new Error('Can\\'t get data from regions, please set ops.regionsDataField');\n      }\n    }\n    data.forEach(d => {\n      var rops = {\n        map: this,\n        region: d.region,\n        color: d.color,\n        centralPosition: d.centralPosition,\n        centralName: d.centralName,\n        distritos: d.distritos,\n        fetch: this.fetchRegion,\n        fetchDistrict: this.fetchDistrict,\n        showSede: this.showSede,\n        sedeIcon: this.sedeIcon\n      };\n      this.baRegions.push(new RegionPolygon(rops));\n    });\n  }\n\n  emit(event, obj){\n    google.maps.event.trigger(this, event, obj);\n  }\n\n  setData(data){\n    if (!data){\n      return;\n    }\n    if (utils.isPromise(data)){\n      data\n        .then(items => {\n          this._createRegions(items);\n        })\n        .catch( err => {\n          console.log(err);\n        });\n    } else {\n      this._createRegions(data);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"google\"\n// module id = 1\n// module chunks = 0 1","'use strict';\n\nexport default {\n  isPromise: function (obj){\n    return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/**\n * Region reprecentada como poligono\n */\n'use strict'\n\nimport google from 'google';\nimport AsyncPolygon from './async-polygon';\n\nconst {Marker} = google.maps;\n\n\nexport default class RegionPolygon extends AsyncPolygon {\n  constructor(ops) {\n\n    var polyOps = {\n      strokeColor: ops.strokeColor || \"#969494\",\n      strokeOpacity: 1,\n      strokeWeight: 2,\n      fillColor: ops.color,\n      fillOpacity: 0.6\n    };\n\n    super(polyOps);\n\n    this.region = ops.region;\n    this.color = ops.color;\n    this.centralPosition = ops.centralPosition;\n    this.centralName = ops.centralName;\n    this.distritos = ops.distritos;\n    this.fetch = ops.fetch;\n    this.fetchDistrict = ops.fetchDistrict;\n    this.showSede = ops.showSede || false;\n    this.sedeIcon = ops.sedeIcon;\n\n    this._setMap(ops.map);\n    this._fetchData();\n  }\n\n  _setMap(map){\n\n    this._onClick(() => {\n      map.emit('region.click', this);\n    });\n\n    this.sede = new Marker({\n      position: this.centralPosition,\n      title: 'Region '+this.region+' | Sede '+this.centralName,\n      icon: this.sedeIcon\n    });\n\n    this.sede.addListener('click', () => {\n      map.emit('sede.click', this);\n    });\n\n    this.sede.setMap(map);\n\n    if (!this.showSede){\n      this.hideSede();\n    }\n\n    super.setMap(map);\n  }\n\n  hideSede(){\n    this.sede.setVisible(false);\n  }\n\n  showSede(){\n    this.sede.setVisible(true);\n  }\n\n  _fetchData(){\n    this.fetch(this.region)\n      .then(data => {\n        if (!(data instanceof Array)){\n          if (data.hasOwnProperty('data') && (data['data'] instanceof Array)){\n            data = data['data'];\n          } else {\n            throw new Error('Can\\'t get path from', data);\n          }\n        }\n        var paths = data.map(function(d){\n          return { lat: d[0], lng: d[1]};\n        });\n        this.setPaths(paths);\n      });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/region-polygon.js","/**\n * AsyncPolygon es una versión customizada de google.maps.Polygon\n * para cargar la información mediante promises\n */\n'use strict'\n\nimport google from 'google';\n\nconst {Polygon, LatLngBounds} = google.maps;\n\nexport default class AsyncPolygon extends Polygon {\n  constructor(ops) {\n    super(ops);\n  }\n\n  getBounds() {\n    let bounds = new LatLngBounds();\n    this.getPath().forEach(function(e){\n      bounds.extend(e);\n    });\n    return bounds;\n  }\n\n  emit(event, obj){\n    google.maps.event.trigger(this, event, obj);\n  }\n\n  fitBounds(){\n    this.getMap().fitBounds(this.getBounds());\n  }\n\n  _onClick(fn){\n    if (!fn || (typeof fn !== 'function')){\n      return;\n    }\n\n    google.maps.event.addListener(this, 'click', () => {\n      fn.apply(this);\n    });\n\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/async-polygon.js"],"sourceRoot":""}