!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("google")):"function"==typeof define&&define.amd?define("RedbaMap",["google"],factory):"object"==typeof exports?exports.RedbaMap=factory(require("google")):root.RedbaMap=factory(root.google)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_google=__webpack_require__(1),_google2=_interopRequireDefault(_google),_utils=__webpack_require__(5),_utils2=_interopRequireDefault(_utils),_regionPolygon=__webpack_require__(4),_regionPolygon2=_interopRequireDefault(_regionPolygon),_google$maps=_google2.default.maps,MapTypeId=_google$maps.MapTypeId,Map=_google$maps.Map,geometry=_google$maps.geometry,RedbaMap=function(_Map){function RedbaMap(ele,ops){if(_classCallCheck(this,RedbaMap),ops=ops||{},!ops.fetchRegion)throw new Error("The ops.fetchRegion is required, define ops.fetchRegion(idRegion)");if(!ops.fetchDistrict)throw new Error("The ops.fetchDistrict is required, define ops.fetchDistrict(idDistrict)");var defaultCenter={lat:-36.99483714719853,lng:-59.69601111984252},defaultZoom=7,baOps={center:defaultCenter,zoom:defaultZoom,mapTypeId:MapTypeId.ROADMAP},gmops=Object.assign({},ops,baOps),_this=_possibleConstructorReturn(this,(RedbaMap.__proto__||Object.getPrototypeOf(RedbaMap)).call(this,ele,gmops));return _this.defaultCenter=defaultCenter,_this.defaultZoom=defaultZoom,_this.setData(ops.regions),_this.regionsDataField=ops.regionsDataField,_this.fetchRegion=ops.fetchRegion,_this.fetchDistrict=ops.fetchDistrict,_this.showSede=ops.showSede||!1,_this.sedeIcon=ops.sedeIcon,_this.overRegionZoom=ops.overRegionZoom||8,_this.addListener("zoom_changed",_this._handleZoon),_this.addListener("center_changed",_this._handleCenter),_this}return _inherits(RedbaMap,_Map),_createClass(RedbaMap,[{key:"_setOverRegion",value:function(){var _this2=this,center=this.getCenter();this.baRegions.forEach(function(r){geometry.poly.containsLocation(center,r)&&(_this2.overRegion?_this2.overRegion.region!==r.region&&(_this2.overRegion=r):_this2.overRegion=r)})}},{key:"_handleZoon",value:function(){var zoom=this.getZoom();zoom>this.overRegionZoom&&this._setOverRegion()}},{key:"_handleCenter",value:function(){var zoom=this.getZoom();zoom>this.overRegionZoom&&this._setOverRegion()}},{key:"_createRegions",value:function(data){var _this3=this;if(this.regionsDataField)data=data[this.regionsDataField];else if(!(data instanceof Array)){if(!(data.hasOwnProperty("data")&&data.data instanceof Array))throw new Error("Can't get data from regions, please set ops.regionsDataField");data=data.data}data.forEach(function(d){var rops={map:_this3,region:d.region,color:d.color,centralPosition:d.centralPosition,centralName:d.centralName,distritos:d.distritos,fetch:_this3.fetchRegion,fetchDistrict:_this3.fetchDistrict,showSede:_this3.showSede,sedeIcon:_this3.sedeIcon};_this3.baRegions.push(new _regionPolygon2.default(rops))})}},{key:"emit",value:function(event,obj,ob2){_google2.default.maps.event.trigger(this,event,obj,ob2)}},{key:"setData",value:function(data){var _this4=this;data&&(_utils2.default.isPromise(data)?data.then(function(items){_this4._createRegions(items)}).catch(function(err){console.log(err)}):this._createRegions(data))}},{key:"findRegion",value:function(region){var regs=this.baRegions.filter(function(r){return r.region===region});if(0!==regs.length)return regs[0]}},{key:"getRegions",value:function(){return this.baRegions}},{key:"resetMap",value:function(){this.baRegions.forEach(function(r){r.show(),r.distritos.forEach(function(d){d.hide()})}),this.setCenter(this.defaultCenter),this.setZoom(this.defaultZoom)}},{key:"overRegion",get:function(){return this._overRegion},set:function(value){var pr=this._overRegion;this._overRegion=value,value&&pr&&value.region===pr.region||this.emit("region.over_change",value,pr)}},{key:"baRegions",get:function(){return this._regions||(this._regions=[]),this._regions}}]),RedbaMap}(Map);exports.default=RedbaMap,module.exports=exports.default},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_google=__webpack_require__(1),_google2=_interopRequireDefault(_google),_google$maps=_google2.default.maps,Polygon=_google$maps.Polygon,LatLngBounds=_google$maps.LatLngBounds,AsyncPolygon=function(_Polygon){function AsyncPolygon(ops){_classCallCheck(this,AsyncPolygon),ops=ops||{};var _this=_possibleConstructorReturn(this,(AsyncPolygon.__proto__||Object.getPrototypeOf(AsyncPolygon)).call(this,ops));return _this.fetch=ops.fetch,_this.dataLoaded=!1,_this}return _inherits(AsyncPolygon,_Polygon),_createClass(AsyncPolygon,[{key:"_fetchData",value:function(){var _this2=this;this.fetch().then(function(data){if(!(data instanceof Array)){if(!(data.hasOwnProperty("data")&&data.data instanceof Array))throw new Error("Can't get paths from",data);data=data.data}var paths=data.map(function(d){return{lat:d[0],lng:d[1]}});_this2.setPaths(paths),_this2.dataLoaded=!0,_this2.emit("data_loaded")})}},{key:"getBounds",value:function(){var bounds=new LatLngBounds;return this.getPath().forEach(function(e){bounds.extend(e)}),bounds}},{key:"emit",value:function(event,obj){_google2.default.maps.event.trigger(this,event,obj)}},{key:"fitBounds",value:function(){this.dataLoaded?this.getMap().fitBounds(this.getBounds()):console.log("Warning: The data is not loaded yet, wait to data_loaded")}},{key:"_onClick",value:function(fn){var _this3=this;fn&&"function"==typeof fn&&_google2.default.maps.event.addListener(this,"click",function(){fn.apply(_this3)})}},{key:"show",value:function(){this.setVisible(!0)}},{key:"hide",value:function(){this.setVisible(!1)}}]),AsyncPolygon}(Polygon);exports.default=AsyncPolygon,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_asyncPolygon=__webpack_require__(2),_asyncPolygon2=_interopRequireDefault(_asyncPolygon),DistrictPolygon=function(_AsyncPolygon){function DistrictPolygon(ops){_classCallCheck(this,DistrictPolygon),ops=ops||{};var polyOps={strokeColor:"#666",strokeOpacity:1,strokeWeight:2,fillColor:ops.color,fillOpacity:.6};polyOps.fetch=function(){return ops.fetch(ops.id)};var _this=_possibleConstructorReturn(this,(DistrictPolygon.__proto__||Object.getPrototypeOf(DistrictPolygon)).call(this,polyOps));return _this.region=ops.region,_this.color=ops.color,_this.id=ops.id,_this.fullname=ops.fullname,_this.name=ops.name,_this.alias=ops.alias,_this.isSede=ops.isSede,_this._setMap(ops.map),_this}return _inherits(DistrictPolygon,_AsyncPolygon),_createClass(DistrictPolygon,[{key:"_setMap",value:function(map){var _this2=this;this._onClick(function(){map.emit("district.click",_this2)}),_get(DistrictPolygon.prototype.__proto__||Object.getPrototypeOf(DistrictPolygon.prototype),"setMap",this).call(this,map)}},{key:"show",value:function(){_get(DistrictPolygon.prototype.__proto__||Object.getPrototypeOf(DistrictPolygon.prototype),"setVisible",this).call(this,!0),this._dataLoaded||this._fetchData()}}]),DistrictPolygon}(_asyncPolygon2.default);exports.default=DistrictPolygon,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_google=__webpack_require__(1),_google2=_interopRequireDefault(_google),_asyncPolygon=__webpack_require__(2),_asyncPolygon2=_interopRequireDefault(_asyncPolygon),_districtPolygon=__webpack_require__(3),_districtPolygon2=_interopRequireDefault(_districtPolygon),Marker=_google2.default.maps.Marker,RegionPolygon=function(_AsyncPolygon){function RegionPolygon(ops){_classCallCheck(this,RegionPolygon),ops=ops||{};var polyOps={strokeColor:ops.strokeColor||"#969494",strokeOpacity:1,strokeWeight:2,fillColor:ops.color,fillOpacity:.6};polyOps.fetch=function(){return ops.fetch(ops.region)};var _this=_possibleConstructorReturn(this,(RegionPolygon.__proto__||Object.getPrototypeOf(RegionPolygon)).call(this,polyOps));_this.region=ops.region,_this.color=ops.color,_this.centralPosition=ops.centralPosition,_this.centralName=ops.centralName;var distritos=ops.distritos;return _this.fetchDistrict=ops.fetchDistrict,_this._showSede=ops.showSede||!1,_this.sedeIcon=ops.sedeIcon,_this._setMap(ops.map),_this._fetchData(),_this._createDistritos(distritos),_this}return _inherits(RegionPolygon,_AsyncPolygon),_createClass(RegionPolygon,[{key:"_createDistritos",value:function(data){var _this2=this;return data&&data instanceof Array?void data.forEach(function(d){var dops={map:_this2.getMap(),region:_this2.region,color:_this2.color,fetch:_this2.fetchDistrict,id:d.id,fullname:d.fullname,name:d.name,alias:d.alias,isSede:d.central},p=new _districtPolygon2.default(dops);d.central&&(_this2.sede=p),_this2.distritos.push(p)}):void console.log("Warning: No existen distritos para ",this.region)}},{key:"_setMap",value:function(map){var _this3=this;this._onClick(function(){map.emit("region.click",_this3)}),this.sedeMarker=new Marker({position:this.centralPosition,title:"Region "+this.region+" | Sede "+this.centralName,icon:this.sedeIcon}),this.sedeMarker.addListener("click",function(){map.emit("sede.click",_this3)}),this.sedeMarker.setMap(map),this._showSede||this.hideSede(),_get(RegionPolygon.prototype.__proto__||Object.getPrototypeOf(RegionPolygon.prototype),"setMap",this).call(this,map)}},{key:"hideSede",value:function(){this.sedeMarker.setVisible(!1)}},{key:"showSede",value:function(){this.sedeMarker.setVisible(!0)}},{key:"showAll",value:function(){this.distritos.forEach(function(d){d.show()})}},{key:"hideAll",value:function(){this.distritos.forEach(function(d){d.hide()})}},{key:"show",value:function(showDistrict){this.showSede(),_get(RegionPolygon.prototype.__proto__||Object.getPrototypeOf(RegionPolygon.prototype),"show",this).call(this),showDistrict&&this.showAll()}},{key:"hide",value:function(){this.hideAll(),this.hideSede(),_get(RegionPolygon.prototype.__proto__||Object.getPrototypeOf(RegionPolygon.prototype),"hide",this).call(this)}},{key:"getDistrito",value:function(id){var dists=this.distritos.filter(function(d){return d.id===id});if(0!==dists.length)return dists[0]}},{key:"distritos",get:function(){return this._distritos||(this._distritos=[]),this._distritos}}]),RegionPolygon}(_asyncPolygon2.default);exports.default=RegionPolygon,module.exports=exports.default},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default={isPromise:function(obj){return!!obj&&("object"===("undefined"==typeof obj?"undefined":_typeof(obj))||"function"==typeof obj)&&"function"==typeof obj.then}},module.exports=exports.default}])});
//# sourceMappingURL=redba-maps.min.js.map